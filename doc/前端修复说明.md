# 前端显示问题修复说明

## 问题描述
运行 `python run.py` 后前端页面无法正常显示

## 问题原因

1. **缺少Python依赖**: flask、flask-cors、apscheduler等未安装
2. **前端未启动**: 仅启动后端API，前端Vite开发服务器未启动
3. **前端依赖损坏**: node_modules中的vite模块文件损坏

## 已完成的修复

### 1. 安装后端依赖
```bash
pip install flask flask-cors apscheduler
```

### 2. 修复前端依赖
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
```

### 3. 创建启动脚本
创建了方便的启动和停止脚本：
- `start.sh` - 一键启动前后端服务
- `stop.sh` - 一键停止所有服务

## 当前运行状态

✅ **后端服务**: 运行中
- 地址: http://localhost:5000
- 状态: 正常

✅ **前端服务**: 运行中
- 地址: http://localhost:3000
- 状态: 正常

## 使用方法

### 方法1: 使用启动脚本（推荐）

```bash
# 启动所有服务
./start.sh

# 停止所有服务
./stop.sh
```

### 方法2: 手动启动

**终端1 - 启动后端:**
```bash
python run.py
```

**终端2 - 启动前端:**
```bash
cd frontend
npm run dev
```

## 访问地址

- **前端界面**: http://localhost:3000
- **后端API**: http://localhost:5000/api/v1

## 验证系统正常

### 1. 测试后端API
```bash
curl http://localhost:5000/api/v1/industries
```

### 2. 测试前端访问
在浏览器打开: http://localhost:3000

### 3. 检查日志
```bash
# 后端日志
tail -f logs/app_*.log

# 前端日志（如果使用启动脚本）
tail -f logs/frontend.log
```

## 常见问题

### Q: 端口已被占用
**现象**: 启动失败，提示端口被占用

**解决**:
```bash
# 查找占用端口的进程
lsof -i :5000  # 后端
lsof -i :3000  # 前端

# 杀死进程
kill -9 <PID>
```

### Q: 前端无法连接后端
**现象**: 前端页面打开但API调用失败

**解决**:
1. 确认后端已启动: `curl http://localhost:5000/api/v1/industries`
2. 检查CORS配置（已在config.yaml中配置）
3. 查看浏览器控制台错误信息

### Q: 前端页面空白
**现象**: 打开 http://localhost:3000 显示空白页

**解决**:
1. 按F12打开浏览器开发者工具查看错误
2. 检查前端服务是否正常运行
3. 重新安装前端依赖:
   ```bash
   cd frontend
   rm -rf node_modules
   npm install
   npm run dev
   ```

## 技术架构

```
用户浏览器
    ↓
前端 (React + Vite)  ← http://localhost:3000
    ↓ (API调用)
后端 (Flask)        ← http://localhost:5000
    ↓
数据库 (SQLite)
    ↓
数据源 (Tushare API)
```

## 下一步

系统已正常运行，你可以：

1. **访问前端界面**: http://localhost:3000
2. **查看API文档**: http://localhost:5000
3. **执行数据更新**:
   ```bash
   python -c "from src.tasks.daily_tasks import daily_data_update; daily_data_update()"
   ```

---

**修复时间**: 2025-11-04
**状态**: ✅ 已解决
